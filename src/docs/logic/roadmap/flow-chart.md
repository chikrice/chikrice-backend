# Roadmap Feature - Visual Flowchart

## 1. ROADMAP CREATION PROCESS

```
┌─────────────────────────────────────────────────────────────────┐
│                    USER INPUT                                   │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐                │
│  │    Age      │ │   Height    │ │   Gender    │                │
│  └─────────────┘ └─────────────┘ └─────────────┘                │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐                │
│  │ StartWeight │ │TargetWeight │ │ActivityLevel│                │
│  └─────────────┘ └─────────────┘ └─────────────┘                │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐                │
│  │   UserId    │ │GoalSpeed    │ │WeightLifting│                │
│  └─────────────┘ └─────────────┘ └─────────────┘                │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
       ┌──────────────────────────────────────────┐
       │           VALIDATION CHECKS              │
       │  ┌─────────────────┐ ┌─────────────────┐ │
       │  │   User Exists?  │ │ All Fields OK?  │ │
       │  └─────────────────┘ └─────────────────┘ │
       └──────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                ROADMAP OVERVIEW GENERATION                      │
│  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐    │
│  │  Calculate      │ │  Determine      │ │  Generate       │    │
│  │  totalDays      │ │  isGainWeight   │ │  monthlyCalorie │    │
│  │  totalMonths    │ │  weightChange   │ │  Adjustment[]   │    │
│  └─────────────────┘ └─────────────────┘ └─────────────────┘    │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│              WEIGHT PROGRESSION CALCULATION                     │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │ FOR each month (1 to totalMonths):                      │    │
│  │   monthFactor = calcMonthProgressFactor(month, total)   │    │
│  │   monthWeightChange = weightChange × monthFactor        │    │
│  │   currentWeight = startWeight ± monthWeightChange       │    │
│  │   Add to weightProgression[]                            │    │
│  └─────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                      MILESTONE CREATION                         │
│  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐    │
│  │  Calculate BMR  │ │  Calculate      │ │  Calculate      │    │
│  │  (Basal Rate)   │ │  baseCalories   │ │  targetCalories │    │
│  └─────────────────┘ └─────────────────┘ └─────────────────┘    │
│  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐    │
│  │  Calculate      │ │  Calculate      │ │  Calculate      │    │
│  │  milestoneDates │ │  macrosRatio    │ │  calorieAdjust  │    │
│  └─────────────────┘ └─────────────────┘ └─────────────────┘    │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                ROADMAP DOCUMENT CREATION                        │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  roadmap = {                                            │    │
│  │    userId,                                              │    │
│  │    overview: { startWeight, targetWeight, ... },        │    │
│  │    milestones: [Milestone],                             │    │
│  │    onGoingMonth: 1,                                     │    │
│  │    onGoingDay: 1,                                       │    │
│  │    activityLog: [{date: startDate, active: false}],     │    │
│  │    isWeightChangeOverLimit                              │    │
│  │  }                                                      │    │
│  └─────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                    SAVE & LINK                                  │
│  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐    │
│  │  Save roadmap   │ │  Link roadmapId │ │  Return         │    │
│  │  to database    │ │  to user        │ │  roadmapId      │    │
│  └─────────────────┘ └─────────────────┘ └─────────────────┘    │
└─────────────────────────────────────────────────────────────────┘
```

## 2. ROADMAP UPDATE PROCESS

```
┌─────────────────────────────────────────────────────────────────┐
│                    UPDATE REQUEST                               │
│  ┌─────────────┐ ┌─────────────┐ ┌───────────────┐              │
│  │ roadmapId   │ │currentWeight│ │newTargetWeight│              │
│  └─────────────┘ └─────────────┘ └───────────────┘              │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                      FETCH DATA                                 │
│  ┌─────────────────┐ ┌─────────────────┐ ┌───────────────────┐  │
│  │  Get user data  │ │  Get roadmap    │ │  Extract          │  │
│  │  (goalSpeed)    │ │  data           │ │  current progress │  │
│  └─────────────────┘ └─────────────────┘ └───────────────────┘  │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                  CHANGE POINT CALCULATION                       │
│  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐    │
│  │  changeIndex =  │ │  leftDays =     │ │  changePointDay │    │
│  │  onGoingMonth   │ │  (month×30) -   │ │  = 30 - leftDays│    │
│  │                 │ │  onGoingDay     │ │                 │    │
│  └─────────────────┘ └─────────────────┘ └─────────────────┘    │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  changePointTargetWeight = calcChangePointTargetWeight  │    │
│  └─────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                NEW ROADMAP OVERVIEW                             │
│  ┌─────────────────┐ ┌─────────────────┐ ┌───────────────────┐  │
│  │  Generate new   │ │  Calculate new  │ │  Calculate new    │  │
│  │  overview from  │ │  totalDays      │ │  weightProgression│  │
│  │  change point   │ │  totalMonths    │ │                   │  │
│  └─────────────────┘ └─────────────────┘ └───────────────────┘  │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│              WEIGHT PROGRESSION COMBINATION                     │
│  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐    │
│  │  Combine old    │ │  Add changePoint│ │  Add new        │    │
│  │  progression    │ │  progression    │ │  progression    │    │
│  │  (before change)│ │                 │ │  (after change) │    │
│  └─────────────────┘ └─────────────────┘ └─────────────────┘    │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                    MILESTONE UPDATE                             │
│  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐    │
│  │  Update change  │ │  Recalculate    │ │  Update         │    │
│  │  point milestone│ │  calories       │ │  milestone data │    │
│  │                 │ │  and macros     │ │                 │    │
│  └─────────────────┘ └─────────────────┘ └─────────────────┘    │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                    SAVE UPDATED ROADMAP                         │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  Save roadmap with new data and updated milestones      │    │
│  └─────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────┘
```

## 3. DATA FLOW DIAGRAM

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│   USER      │    │  ROADMAP    │    │  MILESTONE  │
│   INPUT     │───▶│  OVERVIEW   │───▶│  CREATION   │
└─────────────┘    └─────────────┘    └─────────────┘
       │                   │                   │
       ▼                   ▼                   ▼
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ VALIDATION  │    │ WEIGHT      │    │ CALORIE     │
│ & SAFETY    │    │ PROGRESSION │    │ CALCULATION │
└─────────────┘    └─────────────┘    └─────────────┘
       │                   │                   │
       ▼                   ▼                   ▼
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ ROADMAP     │    │ MILESTONE   │    │ MEAL PLAN   │
│ DOCUMENT    │    │ ARRAY       │    │ ASSOCIATION │
└─────────────┘    └─────────────┘    └─────────────┘
       │                   │                   │
       ▼                   ▼                   ▼
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ DATABASE    │    │ USER        │    │ ACTIVITY    │
│ SAVE        │    │ LINKING     │    │ TRACKING    │
└─────────────┘    └─────────────┘    └─────────────┘
```

## 4. CALCULATION FLOW

```
┌─────────────────────────────────────────────────────────────────┐
│                    CALCULATION ENGINE                           │
│  ┌───────────────────┐ ┌─────────────────┐ ┌─────────────────┐  │
│  │  BMR CALC         │ │  ACTIVITY       │ │  CALORIE        │  │
│  │  Male: 10×w +     │ │  MULTIPLIER     │ │  ADJUSTMENT     │  │
│  │  6.25×h - 5×a+5   │ │  Sedentary: 1.2 │ │  Monthly array  │  │
│  │  Female: 10×w +   │ │  Light: 1.375   │ │  of adjustments │  │
│  │  6.25×h - 5×a-161 │ │  Moderate: 1.55 │ │                 │  │
│  └───────────────────┘ └─────────────────┘ └─────────────────┘  │
│  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐    │
│  │  WEIGHT         │ │  PROGRESS       │ │  MACRO          │    │
│  │  PROGRESSION    │ │  FACTOR         │ │  RATIOS         │    │
│  │  Monthly targets│ │  Month-based    │ │  Protein/Carb/  │    │
│  │  with changes   │ │  progression    │ │  Fat ratios     │    │
│  └─────────────────┘ └─────────────────┘ └─────────────────┘    │
└─────────────────────────────────────────────────────────────────┘
```

## 5. INTEGRATION POINTS

```
┌─────────────────────────────────────────────────────────────────┐
│                    SYSTEM INTEGRATION                           │
│                                                                 │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐          │
│  │   USER      │    │  ROADMAP    │    │  MILESTONE  │          │
│  │   SYSTEM    │◄──►│   SERVICE   │◄──►│   SYSTEM    │          │
│  │             │    │             │    │             │          │
│  └─────────────┘    └─────────────┘    └─────────────┘          │
│         │                   │                   │               │
│         ▼                   ▼                   ▼               │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐          │
│  │  MEAL       │    │  ACTIVITY   │    │  PLAN       │          │
│  │  PLANNING   │    │  TRACKING   │    │  MONTH      │          │
│  │  SYSTEM     │    │  SYSTEM     │    │  SYSTEM     │          │
│  └─────────────┘    └─────────────┘    └─────────────┘          │
└─────────────────────────────────────────────────────────────────┘
```
